html,
body {
	height: 100%;
}

/* Use small viewport height on mobile for accurate sizing with browser chrome */
@media (max-width: 1199px) {
	html,
	body {
		height: 100svh; /* Small viewport - accounts for browser UI */
	}
}

p {
	margin: 0;
	padding: 0;
	line-height: 1.42;
}

.ql-editor:focus-visible {
	box-shadow:
		inset 0px 0px 1rem var(--col-bg-emph),
		0px 0px var(--sh-focus) var(--col-focus);
}

body {
	overflow: hidden;
}

#app {
	height: 100%;
	overflow: hidden;
}

@media (max-width: 1199px) {
	#app {
		height: 100svh; /* Small viewport - accounts for browser UI */
	}
}

.c-logo {
	max-width: 16rem;
}
.c-logo.circle,
.c-logo.line {
	color: #e98a54;
}

.c-logo.slow .circle.main {
	animation: 3s infinite normal c-logo-1;
}
.c-logo.slow .circle.small {
	animation: 3s infinite normal c-logo-3;
}
.c-logo.slow .line {
	animation: 3s infinite normal c-logo-2;
}

.c-logo.fast .circle.main {
	animation: 0.3s infinite normal c-logo-1;
}
.c-logo.fast .circle.small {
	animation: 0.3s infinite normal c-logo-3;
}
.c-logo.fast .line {
	animation: 0.3s infinite normal c-logo-2;
}

@keyframes c-logo-1 {
	from {
		fill: #e98a54;
	}
	20% {
		fill: #e98a54;
	}
	23% {
		fill: #fff;
	}
	29% {
		fill: #e98a54;
	}
}
@keyframes c-logo-2 {
	from {
		fill: #e98a54;
	}
	23% {
		fill: #e98a54;
	}
	26% {
		fill: #fff;
	}
	32% {
		fill: #e98a54;
	}
}
@keyframes c-logo-3 {
	from {
		fill: #e98a54;
	}
	26% {
		fill: #e98a54;
	}
	29% {
		fill: #fff;
	}
	35% {
		fill: #e98a54;
	}
}

.c-menu-ex {
	position: relative;

	.c-nav {
		position: absolute;
		left: 0;
		right: 0;
		padding: 1rem;
		max-width: calc(20rem + 2rem);
		max-height: calc(16rem + 2rem);
		overflow-y: auto;
		margin: 0 auto;
		flex-flow: row wrap;
		z-index: var(--z-dropdown);
		transition:
			transform 0.3s ease,
			visibility 0s 0.3s;
		visibility: hidden;

		&.open {
			transform: translate(0, 0);
			visibility: visible;
			transition:
				transform 0.3s ease,
				visibility 0s 0s;
		}
		.c-nav-link {
			height: 4rem;
			justify-content: center;
		}
	}
}

.c-nav.nav-top {
	position: fixed;
	top: 0;
	left: 0;
	right: 0;
	z-index: var(--z-fixed);

	& > .c-nav-link > h6,
	& > .c-nav-group > .c-nav-link > h6 {
		font-size: 0.83rem;
	}

	.c-menu-ex .c-nav {
		top: 4rem;
		transform: translate(0, -10rem);

		&.open {
			transform: translate(0, 0);
		}
	}
}

/* Desktop extra menu portal - positioned below nav-top */
.c-extra-menu-portal-desktop {
	position: fixed;
	top: 4rem;
	left: 0;
	right: 0;
	z-index: var(--z-popover);
	overflow: hidden;
	pointer-events: none; /* Prevent stealing mouse events when hidden */
}

.c-extra-menu-portal-desktop .c-extra-menu {
	padding: 1rem;
	max-width: calc(20rem + 2rem);
	margin: 0 auto;
	flex-flow: row wrap;
	transform: translateY(-100%);
	transition: transform 0.3s ease;
}

.c-extra-menu-portal-desktop .c-extra-menu.open {
	transform: translateY(0);
	pointer-events: auto; /* Enable interactions when visible */
}

.c-extra-menu-portal-desktop .c-extra-menu .c-nav-link {
	height: 4rem;
	justify-content: center;
}

.c-nav.nav-bottom {
	z-index: var(--z-fixed);

	.c-menu-ex .c-nav {
		bottom: 4.5rem;
		transform: translate(0, 10rem);

		&.open {
			transform: translate(0, 0);
		}
	}
	.c-nav-link {
		width: 4rem;
	}
	/* Ensure active state takes precedence over sticky hover on mobile */
	.c-nav-link.active,
	.c-nav-link.active:hover {
		color: var(--col-primary);
	}
}

/* Mobile: use fixed positioning for bottom nav for reliability */
@media (max-width: 1199px) {
	.c-nav.nav-bottom {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: var(--col-container);
		backdrop-filter: blur(10px);
		-webkit-backdrop-filter: blur(10px);
		border-top: 1px solid var(--col-border);
		z-index: var(--z-fixed);
		/* Account for safe area on devices with home indicator */
		padding-bottom: env(safe-area-inset-bottom, 0);
	}

	/* Extra menu portal container - positioned before nav-bottom in DOM */
	.c-extra-menu-portal {
		position: fixed;
		bottom: 4.5rem;
		left: 0;
		right: 0;
		z-index: var(--z-popover);
		overflow: hidden; /* Clip the sliding menu */
		pointer-events: none; /* Prevent stealing mouse events when hidden */
	}

	/* Extra menu - completely separate styles from .c-menu-ex */
	.c-extra-menu-portal .c-extra-menu {
		padding: 1rem;
		max-width: calc(20rem + 2rem);
		margin: 0 auto;
		flex-flow: row wrap;
		transform: translateY(100%);
		transition: transform 0.3s ease;
	}

	.c-extra-menu-portal .c-extra-menu.open {
		transform: translateY(0);
		pointer-events: auto; /* Enable interactions when visible */
	}

	.c-extra-menu-portal .c-extra-menu .c-nav-link {
		height: 4rem;
		justify-content: center;
	}
}

.c-app {
	border: 4px solid #f80;
	iframe {
		border: 0px;
	}

	&.untrusted {
		border: 4px solid red;
	}
	&.trusted {
		border: 4px solid green;
	}
}

/* App Loading Indicator */
.c-app-loading {
	background: var(--col-bg, #fff);
	opacity: 1;
	transition: opacity 200ms ease-out;
}

.c-app-loading--fade-out {
	opacity: 0;
	pointer-events: none;
}

.c-app-loading__icon {
	color: var(--col-txt-muted, #6b7280);
}

.c-app-loading__icon--spinner {
	animation: c-app-loading-rotate 1.5s linear infinite;
}

.c-app-loading__icon--error {
	color: var(--col-danger, #dc3545);
}

.c-app-loading__text {
	font-size: 1rem;
	color: var(--col-txt-muted, #6b7280);
	margin: 0;
}

.c-app-loading__text--error {
	color: var(--col-danger, #dc3545);
}

.c-app-loading__retry {
	min-width: 6rem;
}

@keyframes c-app-loading-rotate {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

/* Respect reduced motion preference */
@media (prefers-reduced-motion: reduce) {
	.c-app-loading {
		transition: none;
	}

	.c-app-loading__icon--spinner {
		animation: none;
	}
}

.c-thumbnail {
	height: 3rem;
}

.c-image-overlay-counter {
	display: flex;
	align-items: center;
	justify-content: center;
	position: absolute;
	top: 0;
	width: 100%;
	height: 100%;
	font-size: 2rem;
	color: #fff;
	background: rgba(0, 0, 0, 0.5);
	padding: auto;
}

.c-msg.local {
	max-width: 90%;
	align-self: flex-end;
}

.c-msg.remote {
	max-width: 90%;
	align-self: flex-start;
}

.c-msg p {
	margin: 0;
}

.c-profile-card .tag .warn {
	color: var(--col-txt-danger);
}

/* Layout with sidebar */
.c-layout {
	display: flex;
	flex-direction: column;
	height: calc(100% - 3.5rem); /* Account for header height */
	margin-top: 3.5rem; /* Position below header */
	min-width: 0; /* Prevent overflow */
	transition: margin-left 0.3s ease;
	--sidebar-width: 5rem; /* Default sidebar width */
}

.c-layout.with-sidebar {
	margin-left: var(--sidebar-width); /* Use CSS variable for consistency */
}

/* On desktop, layout shifts when sidebar is pinned */
@media (min-width: 1024px) {
	.c-layout.with-sidebar {
		margin-left: var(--sidebar-width); /* Use CSS variable for consistency */
	}
}

/* On mobile, layout doesn't shift */
@media (max-width: 1023px) {
	.c-layout.with-sidebar {
		margin-left: 0;
	}
}

/* Mobile: use fixed positioning to fill space between header and bottom nav */
@media (max-width: 1199px) {
	.c-layout {
		position: fixed;
		top: 3.5rem;
		left: 0;
		right: 0;
		bottom: 4rem; /* Bottom nav height */
		height: auto;
		margin-top: 0;
	}

	.c-layout.with-sidebar {
		margin-left: 0;
	}
}

/* Registration success page */
.c-success-header {
	display: flex;
	flex-direction: column;
	align-items: center;
	padding: 1.5rem;
	margin-bottom: 1.5rem;
}

.c-success-icon {
	width: 5rem;
	height: 5rem;
	color: var(--col-success, #22c55e);
	margin-bottom: 0.75rem;
}

.c-step-card {
	display: flex;
	gap: 1rem;
	padding: 1rem;
	margin-bottom: 1rem;
	border-radius: var(--bd-radius);
	background: var(--col-bg-2);
	border: 1px solid var(--col-border);
}

.c-step-number {
	display: flex;
	align-items: center;
	justify-content: center;
	width: 2rem;
	height: 2rem;
	border-radius: 50%;
	background: var(--col-primary);
	color: white;
	font-weight: bold;
	flex-shrink: 0;
}

.c-step-content {
	flex: 1;
}

.c-info-tip {
	display: flex;
	align-items: center;
	gap: 1rem;
	padding: 1rem;
	border-radius: var(--bd-radius);
	background: var(--col-bg-2);
	border: 1px solid var(--col-border);
}

.c-info-tip-icon {
	width: 2rem;
	height: 2rem;
	flex-shrink: 0;
	color: var(--col-warning, #f59e0b);
}

/* vim: ts=4
*/
